{"version":3,"sources":["webpack:///./src/App.vue?b9f4","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/contextMenu.vue","webpack:///./src/components/contextMenu.vue?4717","webpack:///./src/components/contextMenu.vue","webpack:///./src/data/yiche.js","webpack:///src/components/demo.vue","webpack:///./src/components/demo.vue?38f3","webpack:///./src/components/demo.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","contextMenu","Array","val","components_contextMenu","_vm","staticClass","on","click","$event","stopPropagation","stopBubble","_l","item","key","value","chooseItem","_v","_s","name","yiche","data","condition","type","src","children","demo","contextMenu_normalizeComponent","arguments","length","undefined","no","x","y","width","height","leafCount","content","obj","_this2","subNodeLeaf","temp","fontSize","getBBox","g","text","rect","node","r","conditionFontSize","resetFields","toNode","conditionNode","fromNode","horizonSpace","path","baseY","root","parentNode","_node","_node2","svgInstance","drag","message","contextMenuNode","changeNodeView","nodeName","voiceContent","className","rectName","_ref","matrix","a","b","c","d","e","f","m","_this3","then","res","loadingFun","initSVG","hideContextMenu","components_demo","mousewheel","zoomInOut","size","startProcess","_e","items","menuList","ref","model","nodeAttr","label-width","staticStyle","margin-top","label","prop","callback","$$v","$set","expression","rows","placeholder","editNode","submitEditNode","margin-left","showEditNode","src_components_demo","demo_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","component","config","productionTip","el","template","components","App"],"mappings":"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","file":"static/js/app.6617df12da4f2e5de3a4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-6c1a125a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.1@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.6.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c1a125a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.6.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c1a125a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'app'\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\r\n  <div class=\"contextMenu-Container\" @click.stop=\"stopBubble\">\r\n    <ul>\r\n      <li v-for=\"item in items\" :key=\"item.value\" @click=\"chooseItem(item.value)\">{{ item.name }}</li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n export default {\r\n   name: 'contextMenu',\r\n   props: {\r\n     'items': Array,\r\n     'position': {}\r\n   },\r\n   data () {\r\n     return {\r\n     }\r\n   },\r\n   methods: {\r\n     chooseItem (val) {\r\n       this.$emit('chooseItem', val)\r\n     },\r\n     stopBubble () {\r\n       return false\r\n     }\r\n   }\r\n }\r\n</script>\r\n<style scoped lang='less'>\r\n.contextMenu-Container {\r\n  position: absolute;\r\n  background: #eff3f5;\r\n  font-size: 12px;\r\n  box-shadow: 1px 1px 5px #ccc;\r\n  padding: 15px 0;\r\n  ul, li {\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    color: #3d5564;\r\n  }\r\n  li {\r\n    line-height: 35px;\r\n    padding: 0 20px;\r\n    &:hover {\r\n      cursor: pointer;\r\n      background: #2199de;\r\n      color: #ffffff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/contextMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contextMenu-Container\",on:{\"click\":function($event){$event.stopPropagation();_vm.stopBubble($event)}}},[_c('ul',_vm._l((_vm.items),function(item){return _c('li',{key:item.value,on:{\"click\":function($event){_vm.chooseItem(item.value)}}},[_vm._v(_vm._s(item.name))])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-48070327\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/contextMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-48070327\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=styles&index=0!./contextMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./contextMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./contextMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-48070327\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=template&index=0!./contextMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-48070327\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/contextMenu.vue\n// module id = null\n// module chunks = ","\r\n var data = [  // 节点数据\r\n  {\r\n    name: '机器人',\r\n    condition: '',\r\n    type: 'image',\r\n    src: 'static/img/robot.png',\r\n    id: '1',\r\n    children: [\r\n      {\r\n        name: '普通节点',\r\n        condition: '',\r\n        id: '11',\r\n        children: [\r\n          {\r\n            name: 'sddd',\r\n            condition: 'ss，ss',\r\n            id: '1-1-1',\r\n            children: [\r\n              {\r\n                name: '普通节点',\r\n                condition: '是',\r\n                id: '1-1-1-1',\r\n                children: [\r\n                  {\r\n                    name: '普通节点',\r\n                    condition: '条件一',\r\n                    id: '1-1-1-1-1'\r\n                  },\r\n                  {\r\n                    name: '普通节点',\r\n                    condition: '条件二',\r\n                    id: '1-1-1-1-2',\r\n                    children: [\r\n                      {\r\n                        name: 'END',\r\n                        type: 'stop',\r\n                        condition: '否',\r\n                        id: '1-1-1-1-2-1',\r\n                      }\r\n                    ]\r\n                  },\r\n                  {\r\n                    name: '普通节点',\r\n                    condition: '条件三',\r\n                    id: '1-1-1-1-3'\r\n                  }\r\n                ]\r\n              },\r\n              {\r\n                name: '普通节点',\r\n                condition: '否',\r\n                id: '1-1-1-2',\r\n                children: [\r\n                  {\r\n                    name: 'END',\r\n                    type: 'stop',\r\n                    id: '1-1-1-3',\r\n                    condition: '否'\r\n                  }\r\n                ]\r\n              },\r\n              {\r\n                name: '普通节点',\r\n                id: '1-1-1-3',\r\n                condition: '不理解'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            name: 'END',\r\n            type: 'stop',\r\n            condition: '否',\r\n            id: '1-1-2'\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nexport default {\r\n  data\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/yiche.js","<template>\r\n  <div class=\"config-container\" @mousewheel=\"zoomInOut\">\r\n    <!-- <div class=\"title\">\r\n      <h2>业务配置</h2>\r\n    </div> -->\r\n    <!-- <svg viewBox=\"0 0 800 800\" preserveAspectRatio=\"xMinYMin meet\" id=\"svgContainer\" class=\"svgContainer\"></svg> -->\r\n    <!-- <div :style=\"containerWH\">\r\n      <svg viewBox=\"0 0 3000 6000\" preserveAspectRatio=\"xMinYMin meet\" id=\"svgContainer\" class=\"svgContainer\"></svg>\r\n    </div> -->\r\n    <Button type=\"primary\" class=\"startProcess\" size=\"large\" @click=\"startProcess\" v-if=\"showStartBtn\">开始流程</Button>\r\n    <svg id=\"svgContainer\" class=\"svgContainer\"></svg>\r\n    <context-menu :items=\"menuList\" @chooseItem=\"chooseItem\" v-if=\"showContextMenu\"></context-menu>\r\n    <transition name=\"fade\">\r\n      <div class=\"editNodeAttr\" v-if=\"showEditNode\">\r\n        <div class=\"title\">\r\n          <h3>编辑属性值</h3>\r\n        </div>\r\n        <div class=\"formContent\">\r\n          <Form :model=\"nodeAttr\" :label-width=\"100\" ref=\"nodeAttr\">\r\n            <Form-item label=\"节点名称\" prop=\"nodeName\" style=\"margin-top: 20px\">\r\n              <Input v-model=\"nodeAttr.nodeName\"/>\r\n            </Form-item>\r\n            <Form-item label=\"语音内容\" prop=\"voiceContent\" style=\"margin-top: 20px\">\r\n              <Input v-model=\"nodeAttr.voiceContent\" :rows=\"5\" type=\"textarea\" placeholder=\"请输入...\"/>\r\n            </Form-item>\r\n            <Form-item label=\"模型版本\" prop=\"modelId\" style=\"margin-top: 20px\">\r\n              <Select v-model=\"nodeAttr.modelId\" style=\"width: 100%\" placeholder=\"请选择\">\r\n                <Option value=\"ID001\" :key=\"1\">{{nodeAttr.nodeName+\" v0.1.1\"}}</Option>\r\n                <Option value=\"ID002\" :key=\"2\">{{nodeAttr.nodeName+\" v0.1.2\"}}</Option>\r\n                <Option value=\"ID003\" :key=\"3\">{{nodeAttr.nodeName+\" v0.1.3\"}}</Option>\r\n              </Select>\r\n            </Form-item>\r\n            <!--是否完成-->\r\n            <Form-item label=\"短信内容\" prop=\"message\" style=\"margin-top: 20px\" v-if=\"editNode.leafCount===0\">\r\n              <Input v-model=\"nodeAttr.message\" :rows=\"5\" type=\"textarea\" placeholder=\"请输入...\"/>\r\n            </Form-item>\r\n            <Form-item label=\"处理结果\" prop=\"result\" style=\"margin-top: 20px\" v-if=\"editNode.leafCount===0\">\r\n              <Select v-model=\"nodeAttr.result\" style=\"width: 100%\" placeholder=\"请选择\">\r\n                <Option value=\"1\">同意</Option>\r\n                <Option value=\"0\">拒绝</Option>\r\n              </Select>\r\n            </Form-item>\r\n            <Form-item class=\"controller\">\r\n              <Button type=\"primary\" @click=\"submitEditNode\">确认修改</Button>\r\n              <Button type=\"ghost\" @click=\"showEditNode = false\" style=\"margin-left: 8px\">取消</Button>\r\n            </Form-item>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Snap from 'snapsvg'\r\nimport contextMenu from '../components/contextMenu.vue'\r\nimport dataMap from '@/data/yiche.js'\r\nexport default {\r\n  components: {\r\n    contextMenu\r\n  },\r\n  data () {\r\n    return {\r\n      svgInstance: {}, // svg实例\r\n      fontSize: 14, // 普通节点fontsize\r\n      conditionFontSize: 14, // 条件节点fontsize\r\n      horizonSpace: 200, // 节点间的水平间隔\r\n      verticalSpace: 40, // 节点间的垂直间隔\r\n      rootPosition: {  // 根节点的坐上角坐标\r\n        x: 50,\r\n        y: 0\r\n      },\r\n      selectedNode: {}, // 鼠标单击选中的节点\r\n      data: dataMap['data'],\r\n      menuList: [ // 鼠标右键弹出菜单\r\n        {\r\n          name: '新增子节点',\r\n          value: 1\r\n        },\r\n        {\r\n          name: '删除子节点',\r\n          value: 2\r\n        },\r\n        {\r\n          name: '编辑子节点',\r\n          value: 3\r\n        }\r\n      ],\r\n      showContextMenu: false, // 是否应该展示鼠标右键菜单\r\n      contextMenuIndex: '', // 当前选中的鼠标右键菜单的值\r\n      contextMenuNode: {}, // 在哪个节点上点击了鼠标右键\r\n      showEditNode: false, // 是否展示编辑节点属性框\r\n      nodeAttr: {\r\n        nodeName: '',\r\n        voiceContent: '',\r\n        message: '',\r\n        modelId: '',\r\n        result: ''\r\n      },\r\n      root: [], // 封装的节点对象\r\n      containerWH: {\r\n        width: '100%',\r\n        height: '100%'\r\n      },\r\n      loadingFun: function () {},\r\n      modifyConditionNode: false,\r\n      modifyConditionNodeName: {\r\n        oldName: '',\r\n        nodeName: ''\r\n      },\r\n      currentConditionNode: {}, // 当前选中的条件节点对象\r\n      scale: 1, // svg缩放倍数\r\n      showStartBtn: false,\r\n      editNode: {}\r\n    }\r\n  },\r\n  methods: {\r\n    /** @description 将每一个节点封装成SVG中的节点，带有左上角坐标\r\n     *  @augments value 节点文本内容\r\n     *  @augments no 节点id\r\n     *  @augments x 节点左上角x坐标\r\n     *  @augments y 节点左上角y坐标\r\n     *  @returns 返回节点对象，包括节点内容，节点左上角坐标，节点的宽度、高度，子节点列表，子节点中叶子节点的个数(为了计算占用空间)\r\n    */\r\n    Node (value = '', no = '', condition = '', leafCount = 0, x = 0, y = 0, content = '', message = '', type = 'normal') {\r\n      let obj = {}\r\n      let width = this.getStrBytes(value) * this.fontSize / 2 + 20\r\n      let height = this.fontSize + 20\r\n      obj.value = value\r\n      obj.no = no\r\n      obj.x = x\r\n      obj.y = y\r\n      obj.width = width\r\n      obj.height = height\r\n      obj.leafCount = leafCount\r\n      obj.condition = condition\r\n      obj.children = []\r\n      obj.type = type\r\n      obj.content = content\r\n      return obj\r\n    },\r\n    /** @description 定义一个条件节点 */\r\n    ConditionNode (value = '') {\r\n      let obj = {}\r\n      let width = this.getStrBytes(value) * (this.conditionFontSize + 2) / 2 + 5\r\n      let height = this.conditionFontSize + 10\r\n      obj.value = value\r\n      obj.width = width\r\n      obj.height = height\r\n      return obj\r\n    },\r\n    /** 圆形节点，即终止节点 */\r\n    CircleNode (value = '', x = 0, y = 0, condition = '', type = 'stop') {\r\n      let obj = {}\r\n      obj.value = value\r\n      obj.x = x\r\n      obj.y = y\r\n      obj.r = 20\r\n      obj.condition = condition\r\n      obj.type = type\r\n      return obj\r\n    },\r\n    /** @description 画图片节点 */\r\n    ImageNode (value, src, leafCount = 0, children = [], x = this.rootPosition.x, y = this.rootPosition.y, width = 50, height = 45, type = 'image') {\r\n      let obj = {}\r\n      obj.value = value\r\n      obj.src = src\r\n      obj.x = x\r\n      obj.y = y\r\n      obj.leafCount = leafCount\r\n      obj.children = children\r\n      obj.width = width\r\n      obj.height = height\r\n      obj.type = type\r\n      return obj\r\n    },\r\n    /** @description 获取节点中叶子节点的个数，为了计算节点所占空间 */\r\n    getLeafCount (data) {\r\n      let temp = 0\r\n      data.forEach(item => {\r\n        if (item.type !== 'stop') {\r\n          if (!item.children || item.children.length === 0 ||\r\n             (item.children.length === 1 && item.children[0].type === 'stop')) {\r\n            // 如果节点是叶子节点且不是终止节点\r\n            this.$set(item, 'leafCount', 0)\r\n            temp += 1\r\n          } else if (item.children.length > 0) {\r\n            // 如果节点不是叶子节点\r\n            let subNodeLeaf = this.getLeafCount(item.children)\r\n            this.$set(item, 'leafCount', subNodeLeaf)\r\n            temp += subNodeLeaf\r\n          }\r\n        }\r\n      })\r\n      return temp\r\n    },\r\n    /** @description 获取字符串字节数，一个汉字两个字节 */\r\n    getStrBytes (str) {\r\n      return str.replace(/[^\\x00-\\xff]/g, 'aa').length\r\n    },\r\n    /** @description 画节点并给节点添加事件\r\n     *  @augments node 文本节点\r\n     *  @returns 返回文本和框线的组合对象\r\n     */\r\n    drawNode (node) {\r\n      let _this = this\r\n      let text = this.svgInstance.text(node.x + 10, node.y + this.fontSize + 8, node.value).attr({\r\n        fontSize: this.fontSize,\r\n        fill: '#333333'\r\n      })\r\n      let textNode = text.node.getBBox()\r\n      node.width = textNode.width + 20\r\n      let rect = this.svgInstance.rect(node.x, node.y, node.width, node.height, 2)\r\n      rect.attr({\r\n        fill: '#fff',\r\n        stroke: '#333333',\r\n        strokeWidth: 1\r\n      })\r\n      let g = this.svgInstance.g()\r\n      g.add(rect, text)\r\n      g.addClass('node _' + node.no)\r\n      g.attr({\r\n        cursor: 'pointer'\r\n      })\r\n      g.node.onclick = _this.onNodeClick(g, node, rect)\r\n      g.node.oncontextmenu = _this.onContextMenu(g, node, rect)\r\n      return node\r\n    },\r\n    /** @description 单击节点事件 */\r\n    onNodeClick (g, node, rect) {\r\n      let _this = this\r\n      return function () {\r\n        Snap.selectAll('.active rect').attr({\r\n          stroke: '#c7d3e1'\r\n        })\r\n        g.addClass('active')\r\n        rect.attr({\r\n          stroke: '#198ae0'\r\n        })\r\n        _this.selectedNode = node\r\n      }\r\n    },\r\n    /** @description 节点的鼠标右键事件 */\r\n    onContextMenu (g, node, rect) {\r\n      let _this = this\r\n      return function () {\r\n        Snap.selectAll('.active rect').attr({\r\n          stroke: '#c7d3e1'\r\n        })\r\n        g.addClass('active')\r\n        rect.attr({\r\n          stroke: '#198ae0'\r\n        })\r\n        _this.showContextMenu = true\r\n        _this.contextMenuNode = node\r\n        _this.contextMenuIndex = 0\r\n        _this.$nextTick(() => {\r\n          document.querySelector('.contextMenu-Container').style.left = event.clientX - 200 + 'px'\r\n          document.querySelector('.contextMenu-Container').style.top = event.clientY - 10 + 'px'\r\n        })\r\n        return false\r\n      }\r\n    },\r\n    /** @description 画两条线之间的条件节点 */\r\n    drawConditionNode (fromNode, toNode) {\r\n      let _this = this\r\n      let conditionNode = this.ConditionNode(toNode.condition)\r\n      if (toNode.type === 'stop' && fromNode.leafCount === 0) {\r\n        // 如果结束节点为终止节点，并且开始节点为叶子节点\r\n        conditionNode.x = toNode.x - this.horizonSpace / 4 - toNode.r\r\n        conditionNode.y = fromNode.y + 6\r\n      } else if (toNode.type === 'stop' && fromNode.leafCount > 0) {\r\n        // 如果结束节点为终止节点，并且开始节点为非叶子节点\r\n        conditionNode.x = toNode.x - conditionNode.width / 2\r\n        conditionNode.y = fromNode.y - this.horizonSpace / 2\r\n      } else if (fromNode.y === toNode.y && (fromNode.leafCount === toNode.leafCount)) {\r\n        // 如果开始节点和终止节点在同一条水平线上，并且开始节点的直接子节点只有一个（子节点为终止节点不算，故不能判断children的长度）\r\n        conditionNode.x = toNode.x - this.horizonSpace / 2 - conditionNode.width / 2\r\n        conditionNode.y = toNode.y + 6\r\n      } else {\r\n        // 如果开始节点和结束节点不在同一条水平线上\r\n        conditionNode.x = toNode.x - 3 * this.horizonSpace / 8 - conditionNode.width / 2\r\n        conditionNode.y = toNode.y + 6\r\n      }\r\n      let text = this.svgInstance.text(conditionNode.x + 5, conditionNode.y + this.fontSize + 2, conditionNode.value).attr({\r\n        fontSize: this.conditionFontSize,\r\n        fill: '#022a46'\r\n      })\r\n      // 节点宽度修正\r\n      let textNode = text.node.getBBox()\r\n      conditionNode.width = textNode.width + 10\r\n      let rect = this.svgInstance.rect(conditionNode.x, conditionNode.y, conditionNode.width, conditionNode.height, 2)\r\n      rect.attr({\r\n        fill: '#c7d3e1'\r\n      })\r\n      let g = this.svgInstance.g()\r\n      g.add(rect, text)\r\n      g.addClass('conditionNode _' + toNode.no)\r\n      g.attr({\r\n        cursor: 'pointer'\r\n      })\r\n      g.node.ondblclick = function () {\r\n        _this.modifyConditionNode = true\r\n        _this.$nextTick(() => {\r\n          _this.$refs['modifyConditionNodeName'].resetFields()\r\n          _this.currentConditionNode = toNode\r\n          _this.modifyConditionNodeName.oldName = toNode.condition\r\n        })\r\n      }\r\n      return conditionNode\r\n    },\r\n    /** @description 画终止节点 */\r\n    drawStopNode (node) {\r\n      let circle = this.svgInstance.circle(node.x, node.y, node.r)\r\n      circle.attr({\r\n        fill: '#d53737'\r\n      })\r\n      let text = this.svgInstance.text(node.x - this.fontSize, node.y + this.fontSize / 2 - 1, node.value).attr({\r\n        fontSize: this.conditionFontSize,\r\n        fill: '#fff'\r\n      })\r\n      let g = this.svgInstance.g()\r\n      g.add(circle, text)\r\n      return node\r\n    },\r\n    /** @description 画图片节点 */\r\n    drawImageNode (node) {\r\n      let imageNode = this.svgInstance.image(node.src, node.x, node.y, node.width, node.height)\r\n      let text = this.svgInstance.text(node.x + 10, node.y + node.height + 20, node.value).attr({\r\n        fontSize: this.conditionFontSize,\r\n        fill: '#333333'\r\n      })\r\n      let g = this.svgInstance.g()\r\n      g.add(imageNode, text)\r\n      return node\r\n    },\r\n    /** @description 画两个节点之间的线\r\n     *  @augments fromNode 开始节点\r\n     *  @augments toNode 截止节点\r\n     */\r\n    drawLine (fromNode, toNode) {\r\n      let path = ''\r\n      if (fromNode.type === 'normal' && toNode.type === 'normal') {\r\n        path = `M${fromNode.x + fromNode.width} ${fromNode.y + fromNode.height / 2}\r\n                L${fromNode.x + fromNode.width + this.horizonSpace / 4} ${fromNode.y + fromNode.height / 2}\r\n                M${fromNode.x + fromNode.width + this.horizonSpace / 4} ${fromNode.y + fromNode.height / 2}\r\n                L${fromNode.x + fromNode.width + this.horizonSpace / 4} ${toNode.y + toNode.height / 2}\r\n                M${fromNode.x + fromNode.width + this.horizonSpace / 4} ${toNode.y + toNode.height / 2}\r\n                L${toNode.x} ${toNode.y + toNode.height / 2}`\r\n      } else if (toNode.type === 'stop' && fromNode.leafCount === 0) {\r\n        // 叶子节点的终止条件显示到右侧\r\n        path = `M${fromNode.x + fromNode.width} ${fromNode.y + fromNode.height / 2}\r\n                L${toNode.x} ${toNode.y}`\r\n      } else if (toNode.type === 'stop' && fromNode.leafCount > 0) {\r\n        // 非叶子节点的终止条件显示到上方\r\n        path = `M${fromNode.x + fromNode.width / 2} ${fromNode.y}\r\n                L${toNode.x} ${toNode.y}`\r\n      } else if (fromNode.type === 'image') {\r\n        path = `M${fromNode.x + fromNode.width + 3} ${toNode.y + toNode.height / 2}\r\n                L${toNode.x} ${toNode.y + toNode.height / 2}`\r\n      }\r\n      let line = this.svgInstance.path(path)\r\n      line.attr({\r\n        stroke: '#333333',\r\n        strokeWidth: 1,\r\n        'stroke-dasharray': '2, 2'\r\n      })\r\n      // 如果有条件则画条件框\r\n      if (toNode.condition) {\r\n        this.drawConditionNode(fromNode, toNode)\r\n      }\r\n    },\r\n    /** @description 将数据封装成节点对象,并赋予节点位置信息\r\n     *  @augments data 要展示的流程数据\r\n     *  @augments parentNode 父节点\r\n     */\r\n    transformData (data, parentNode) {\r\n      let _this = this\r\n      let root = null\r\n      let baseY = 0\r\n      if (parentNode === null) {\r\n        // root = this.Node(data[0].name, data[0].no, data[0].condition, data[0].leafCount, this.rootPosition.x, this.rootPosition.y)\r\n        root = this.ImageNode(data[0].name, data[0].src, data[0].leafCount)\r\n        // baseY =this.rootPosition.y - (root.leafCount - 1) * (root.height + this.verticalSpace) / 2\r\n        baseY = root.y - (root.leafCount - 1) * (root.height + this.verticalSpace) / 2\r\n        if (baseY < 0) {\r\n          this.rootPosition.y -= baseY\r\n          return null\r\n        } else {\r\n          data = data[0].children\r\n          this.transformData(data, root)\r\n        }\r\n      } else {\r\n        root = parentNode\r\n        let childNodesX = root.x + root.width + this.horizonSpace\r\n        baseY = root.y - (root.leafCount - 1) * (root.height + this.verticalSpace) / 2\r\n        data.forEach(function (item, i) {\r\n          // 如果节点不是终止节点\r\n          if (!item.type || item.type !== 'stop') {\r\n            let PosY = 0\r\n            let leafCount = item.leafCount === 0 ? 1 : item.leafCount\r\n            if (i === 0) {\r\n              PosY = baseY + (leafCount - 1) * (root.height + _this.verticalSpace) / 2\r\n            } else {\r\n              let preNode = root.children[i - 1]\r\n              let perNodeLeaf = preNode.leafCount === 0 ? 1 : preNode.leafCount\r\n              let base = preNode.y + (perNodeLeaf + 1) * (preNode.height + _this.verticalSpace) / 2\r\n              PosY = base + (leafCount - 1) * (root.height + _this.verticalSpace) / 2\r\n            }\r\n            let node = _this.Node(item.name, item.no, item.condition, item.leafCount, childNodesX, PosY, item.content)\r\n            root.children.push(node)\r\n            if (item.children && item.children.length > 0) {\r\n              _this.transformData(item.children, node)\r\n            }\r\n          } else if (root.leafCount > 0) {\r\n            // 如果节点是终止节点且父节点除终止节点外还有其他节点，将终止节点显示到父节点上方\r\n            let node = _this.CircleNode(item.name, root.x + root.width / 2, root.y - _this.horizonSpace, item.condition)\r\n            root.children.push(node)\r\n          } else {\r\n            // 如果节点是终止节点且父节点为叶子节点，将终止节点显示到父元素右侧\r\n            let node = _this.CircleNode(item.name, childNodesX - _this.horizonSpace / 2, root.y + root.height / 2, item.condition)\r\n            root.children.push(node)\r\n          }\r\n        })\r\n      }\r\n      return root\r\n    },\r\n    /** @description 画树 */\r\n    drawFlowChart (root) {\r\n      let _this = this\r\n      if (root.type === 'normal') {\r\n        this.drawNode(root)\r\n      } else if (root.type === 'stop') {\r\n        this.drawStopNode(root)\r\n      } else if (root.type === 'image') {\r\n        this.drawImageNode(root)\r\n      }\r\n      if (root.children && root.children.length > 0) {\r\n        root.children.forEach(function (item) {\r\n          _this.drawLine(root, item)\r\n          _this.drawFlowChart(item)\r\n        })\r\n      }\r\n    },\r\n    /** @description init\r\n     */\r\n    initSVG () {\r\n      this.svgInstance = Snap('#svgContainer')\r\n      window.test = this.svgInstance\r\n      this.svgInstance.drag()\r\n      this.getLeafCount(this.data)\r\n      this.root = this.transformData(this.data, null)\r\n      if (this.root === null) {\r\n        this.root = this.transformData(this.data, null)\r\n      }\r\n      this.drawFlowChart(this.root)\r\n    },\r\n    /** @description 选择鼠标右键弹出的菜单的菜单项 */\r\n    chooseItem (value) {\r\n      this.showContextMenu = false\r\n      this.contextMenuIndex = value\r\n      if (this.contextMenuIndex === 1) {\r\n        this.contextMenuNode.value = 1\r\n      } else if (this.contextMenuIndex === 2) {\r\n        console.log('删除子节点')\r\n      } else if (this.contextMenuIndex === 3) {\r\n        this.showEditNode = true\r\n        this.nodeAttr.nodeName = this.contextMenuNode.value\r\n        this.nodeAttr.voiceContent = this.contextMenuNode.content\r\n        this.nodeAttr.message = this.contextMenuNode.message\r\n        this.editNode = this.contextMenuNode\r\n      }\r\n    },\r\n    /** @description 在界面上点击鼠标关闭鼠标右键菜单 */\r\n    hideContextMenu () {\r\n      this.showContextMenu = false\r\n      // this.contextMenuNode = {}\r\n    },\r\n    /** 关闭编辑属性值界面 */\r\n    submitEditNode () {\r\n      this.changeNodeView()\r\n    },\r\n    changeNodeView () {\r\n      this.showEditNode = false\r\n      this.contextMenuNode.value = this.nodeAttr.nodeName\r\n      this.contextMenuNode.content = this.nodeAttr.voiceContent\r\n      this.contextMenuNode.message = this.nodeAttr.message\r\n      let className = '.node._' + this.contextMenuNode.no + ' text'\r\n      let textEle = this.svgInstance.select(className)\r\n      textEle.node.innerHTML = this.nodeAttr.nodeName\r\n      let rectName = '.node._' + this.contextMenuNode.no + ' rect'\r\n      let rectEle = this.svgInstance.select(rectName)\r\n      rectEle.node.style.width = this.getStrBytes(this.nodeAttr.nodeName) * this.fontSize / 2 + 20\r\n    },\r\n    zoomInOut (event) {\r\n      let matrix = (this.svgInstance.node.transform.animVal[0] && this.svgInstance.node.transform.animVal[0].matrix) || new Snap.Matrix(1, 0, 0, 1, 0, 0)\r\n      let [a, b, c, d, e, f] = [matrix.a, matrix.b, matrix.c, matrix.d, matrix.e, matrix.f]\r\n      if (event && event.wheelDelta > 0) {\r\n        a += 0.1\r\n      } else if (event && event.wheelDelta < 0 && a >= 0.3) {\r\n        a -= 0.1\r\n      }\r\n      d = a\r\n      let m = new Snap.Matrix(a, b, c, d, e, f)\r\n      this.svgInstance.transform(m)\r\n    },\r\n    submitNodeName () {\r\n      this.modifyConditionNode = false\r\n      this.currentConditionNode.condition = this.modifyConditionNodeName.nodeName\r\n      let className = '.conditionNode._' + this.currentConditionNode.no + ' text'\r\n      let rectName = '.conditionNode._' + this.currentConditionNode.no + ' rect'\r\n      let textEle = this.svgInstance.select(className)\r\n      let rectEle = this.svgInstance.select(rectName)\r\n      textEle.node.innerHTML = this.modifyConditionNodeName.nodeName\r\n      rectEle.node.style.width = this.getStrBytes(this.modifyConditionNodeName.nodeName) * (this.conditionFontSize + 2) / 2 + 10\r\n    },\r\n    cancel () {\r\n      this.modifyConditionNode = false\r\n    },\r\n    startProcess () {\r\n      this.axios.get('/orderMessage/guahao.do')\r\n      .then((res) => {\r\n        this.loadingFun()\r\n        if (res.data.returnCode === '1') {\r\n          this.$Message.success('流程开启成功')\r\n        } else {\r\n          this.$Message.error('流程开启失败')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  // watch: {\r\n  //   '$route' (to, from) {\r\n  //     this.rootPosition = {  // 根节点的坐上角坐标\r\n  //       x: 50,\r\n  //       y: 100\r\n  //     }\r\n  //     let m = new Snap.Matrix(1, 0, 0, 1, 0, 0)\r\n  //     this.svgInstance.transform(m)\r\n  //     if (Object.keys(this.svgInstance).length) {\r\n  //       this.svgInstance.clear()\r\n  //       this.data = dataMap[to.params.path]\r\n  //       this.initSVG()\r\n  //     }\r\n  //     if (~to.path.indexOf('data2')) {\r\n  //       this.showStartBtn = true\r\n  //       // let m = new Snap.Matrix(0.8, 0, 0, 0.8, -380, -827)\r\n  //       // // 旋转\r\n  //       // this.svgInstance.transform(m)\r\n  //     } else {\r\n  //       this.showStartBtn = false\r\n  //       // let m = new Snap.Matrix(0.5, 0, 0, 0.5, -959, -3109)\r\n  //       // // 旋转\r\n  //       // this.svgInstance.transform(m)\r\n  //     }\r\n  //     this.showEditNode = false\r\n  //   }\r\n  // },\r\n  mounted () {\r\n    this.initSVG()\r\n    document.onclick = this.hideContextMenu\r\n    if (~this.$route.path.indexOf('data2')) {\r\n      this.showStartBtn = true\r\n    } else {\r\n      this.showStartBtn = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang='less' scoped>\r\n@titleHeight: 10px;\r\n.config-container {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  -moz-user-select: none; \r\n  -khtml-user-select: none;\r\n  user-select: none;\r\n  // width: 2000px;\r\n  // height: 2000px;\r\n  color: #333333; \r\n  .title {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    border-bottom: 1px solid #e7edf4;\r\n    h2, h3 {\r\n      float: left;\r\n      font-size: 14px;\r\n      font-weight: normal;\r\n      letter-spacing: 1px;\r\n      border-bottom: 2px solid #84c3e9;\r\n      line-height:40px;\r\n      padding: 0 20px;\r\n    }\r\n    h3 {\r\n      font-weight: bold;\r\n      border-bottom: none;\r\n    }\r\n  }\r\n  .svgContainer {\r\n    width:4000px;\r\n    height:7000px;\r\n    overflow: visible;\r\n  }\r\n  .editNodeAttr {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 2px;\r\n    width: 540px;\r\n    bottom: 2px;\r\n    box-sizing: border-box;\r\n    background: #eff3f5;\r\n    box-shadow: -1px 0px 5px #ccc;\r\n  }\r\n  .formContent {\r\n    position: absolute;\r\n    top: 40px;\r\n    left: 10px;\r\n    right: 20px;\r\n    bottom: 0;\r\n    .ivu-input-wrapper {\r\n      width: 100%;\r\n    }\r\n    .controller {\r\n      position: absolute;\r\n      bottom: 10px;\r\n      right: 0;\r\n    }\r\n  }\r\n  .modifyNodeName {\r\n    .ivu-input-wrapper {\r\n      width: 100%;\r\n    }\r\n  }\r\n  .fade-enter-active {\r\n    transition: width .1s\r\n  }\r\n  .fade-leave-active {\r\n    transition: width .3s\r\n  }\r\n  .fade-enter, .fade-leave-to /* .fade-leave-active in below version 2.1.8 */ {\r\n    width: 0px;\r\n  }\r\n  .startProcess {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 20px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/demo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"config-container\",on:{\"mousewheel\":_vm.zoomInOut}},[(_vm.showStartBtn)?_c('Button',{staticClass:\"startProcess\",attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.startProcess}},[_vm._v(\"开始流程\")]):_vm._e(),_vm._v(\" \"),_c('svg',{staticClass:\"svgContainer\",attrs:{\"id\":\"svgContainer\"}}),_vm._v(\" \"),(_vm.showContextMenu)?_c('context-menu',{attrs:{\"items\":_vm.menuList},on:{\"chooseItem\":_vm.chooseItem}}):_vm._e(),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showEditNode)?_c('div',{staticClass:\"editNodeAttr\"},[_c('div',{staticClass:\"title\"},[_c('h3',[_vm._v(\"编辑属性值\")])]),_vm._v(\" \"),_c('div',{staticClass:\"formContent\"},[_c('Form',{ref:\"nodeAttr\",attrs:{\"model\":_vm.nodeAttr,\"label-width\":100}},[_c('Form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"节点名称\",\"prop\":\"nodeName\"}},[_c('Input',{model:{value:(_vm.nodeAttr.nodeName),callback:function ($$v) {_vm.$set(_vm.nodeAttr, \"nodeName\", $$v)},expression:\"nodeAttr.nodeName\"}})],1),_vm._v(\" \"),_c('Form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"语音内容\",\"prop\":\"voiceContent\"}},[_c('Input',{attrs:{\"rows\":5,\"type\":\"textarea\",\"placeholder\":\"请输入...\"},model:{value:(_vm.nodeAttr.voiceContent),callback:function ($$v) {_vm.$set(_vm.nodeAttr, \"voiceContent\", $$v)},expression:\"nodeAttr.voiceContent\"}})],1),_vm._v(\" \"),_c('Form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"模型版本\",\"prop\":\"modelId\"}},[_c('Select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.nodeAttr.modelId),callback:function ($$v) {_vm.$set(_vm.nodeAttr, \"modelId\", $$v)},expression:\"nodeAttr.modelId\"}},[_c('Option',{key:1,attrs:{\"value\":\"ID001\"}},[_vm._v(_vm._s(_vm.nodeAttr.nodeName+\" v0.1.1\"))]),_vm._v(\" \"),_c('Option',{key:2,attrs:{\"value\":\"ID002\"}},[_vm._v(_vm._s(_vm.nodeAttr.nodeName+\" v0.1.2\"))]),_vm._v(\" \"),_c('Option',{key:3,attrs:{\"value\":\"ID003\"}},[_vm._v(_vm._s(_vm.nodeAttr.nodeName+\" v0.1.3\"))])],1)],1),_vm._v(\" \"),(_vm.editNode.leafCount===0)?_c('Form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"短信内容\",\"prop\":\"message\"}},[_c('Input',{attrs:{\"rows\":5,\"type\":\"textarea\",\"placeholder\":\"请输入...\"},model:{value:(_vm.nodeAttr.message),callback:function ($$v) {_vm.$set(_vm.nodeAttr, \"message\", $$v)},expression:\"nodeAttr.message\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.editNode.leafCount===0)?_c('Form-item',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label\":\"处理结果\",\"prop\":\"result\"}},[_c('Select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.nodeAttr.result),callback:function ($$v) {_vm.$set(_vm.nodeAttr, \"result\", $$v)},expression:\"nodeAttr.result\"}},[_c('Option',{attrs:{\"value\":\"1\"}},[_vm._v(\"同意\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"0\"}},[_vm._v(\"拒绝\")])],1)],1):_vm._e(),_vm._v(\" \"),_c('Form-item',{staticClass:\"controller\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitEditNode}},[_vm._v(\"确认修改\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.showEditNode = false}}},[_vm._v(\"取消\")])],1)],1)],1)]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-d126ff1e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/demo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d126ff1e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=styles&index=0!./demo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./demo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=script&index=0!./demo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d126ff1e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.6.1@vue-loader/lib/selector?type=template&index=0!./demo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d126ff1e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/demo.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Demo from '@/components/demo'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: 'Demo',\r\n      component: Demo\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  template: '<App/>',\r\n  components: { App }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}